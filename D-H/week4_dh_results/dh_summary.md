# D-H 实验数据总结 - Week 4

本文档包含D-H（Diffie-Hellman）的攻击与防御对比实验数据、表格和简要总结，用于支持论文的 "Result" 和 "Discussion" 部分。

## 1. 实验对比表格

此表格对比了攻击者在“有防御”和“无防御”两种情况下的攻击效果。数据来源于 `week2_attack_log.txt` 和 `week3_defense_log.txt`。

| 实验指标 | 实验一: 攻击基础 D-H (Baseline) | 实验二: 攻击 D-H + PSK/HMAC (Defended) |
| :--- | :--- | :--- |
| **通信协议** | 基础 D-H (无身份认证) | D-H 结合预共享密钥 (PSK) 和 HMAC 认证 |
| **攻击者行为** | 拦截并替换双方的公钥 | 拦截并替换双方的公钥 |
| **接收方验证 (Bob)** | (无认证机制) | `verify_mac()` **返回 `False`** |
| **Alice 计算的密钥** | `17` (以Trial 1为例) | (会话终止，未计算) |
| **Bob 计算的密钥** | `18` (以Trial 1为例) | (会话终止，未计算) |
| **攻击结果** | **攻击成功** | **攻击失败 (被检测)** |
| **最终效果** | 攻击者分别与双方建立密钥 (`17` 和 `18`)，通信被完全破解。 | Bob 检测到公钥与 MAC 不匹配，立即终止会话，防止了攻击。 |

## 2. 简要总结

[cite_start]根据第四周任务要求，对攻击和防御效果总结如下 ：

* **攻击效果 (实验一):**
    实验一的结果清晰地表明，基础D-H协议在没有身份认证的情况下，无法抵御MITM攻击。从 `week2_attack_log.txt` 日志可见，攻击者（Attacker）成功拦截了客户端（Client）和服务器（Server）的公钥，并将其替换为自己的公钥。
    这导致客户端和服务器计算出了两个**完全不同**的共享密钥（例如 Trial 1 中的 `17` 和 `18`），而这两个密钥分别被攻击者所掌握。实验的100%成功率证实了基础D-H的根本性漏洞。

* **防御效果 (实验二):**
    实验二在D-H协议中加入了基于预共享密钥（PSK）的HMAC认证机制。`week3_defense_log.txt` 的日志显示，当攻击者再次尝试替换公钥时，Bob（接收方）在验证消息时，发现收到的公钥（来自攻击者）与其附带的HMAC（来自Alice）无法通过 `verify_mac()` 的校验（结果为 `False`）。
    Bob因此立即识别出这是MITM攻击，并终止了会话。这阻止了任何共享密钥的建立。实验结果证明，PSK+HMAC防御机制有效解决了D-H的身份认证缺陷，成功防御了MITM攻击。
